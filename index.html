<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WWE Photo Downloader</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #1a1a1a;
            color: #fff;
            padding: 40px 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
        }

        h1 {
            margin-bottom: 10px;
            font-size: 32px;
        }

        .subtitle {
            color: #888;
            margin-bottom: 40px;
            font-size: 14px;
        }

        .step {
            background: #2a2a2a;
            padding: 30px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .step h2 {
            color: #0066cc;
            font-size: 20px;
            margin-bottom: 15px;
        }

        .step p {
            line-height: 1.6;
            margin-bottom: 15px;
            color: #ccc;
        }

        .bookmarklet {
            display: inline-block;
            background: #0066cc;
            color: #fff;
            padding: 14px 24px;
            border-radius: 6px;
            text-decoration: none;
            font-weight: 600;
            font-size: 16px;
            cursor: move;
            transition: background 0.2s;
        }

        .bookmarklet:hover {
            background: #0052a3;
        }

        .instruction {
            background: #ff9800;
            color: #000;
            padding: 12px;
            border-radius: 4px;
            margin-top: 10px;
            font-size: 14px;
            font-weight: 600;
        }

        .note {
            background: #2a2a2a;
            border-left: 3px solid #2e7d32;
            padding: 15px;
            margin-top: 20px;
            border-radius: 4px;
            font-size: 14px;
            line-height: 1.6;
        }

        ol {
            margin-left: 20px;
            line-height: 1.8;
            color: #ccc;
        }

        ol li {
            margin-bottom: 10px;
        }

        strong {
            color: #fff;
        }

        code {
            background: #1a1a1a;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: monospace;
            color: #0099ff;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>WWEPhotos Downloader</h1>
        <p class="subtitle">Fast & Simple - No CORS Issues</p>
        
        <div class="step">
            <h2>Step 1: Add Bookmarklet to Bookmarks Bar</h2>
            <p>Drag this button to your bookmarks bar:</p>
            
            <a href='javascript:(async function(){const d=document.createElement("div");d.style.cssText="position:fixed;top:20px;right:20px;background:%230066cc;color:%23fff;padding:15px 25px;border-radius:8px;z-index:999999;font-weight:600;box-shadow:0 4px 12px rgba(0,0,0,0.5);font-size:14px;z-index:9999999";d.textContent="Finding gallery...";document.body.appendChild(d);const nid=document.body.innerHTML.match(/"currentPageId":"(\d+)"/)?.[1];if(!nid){d.textContent="Gallery ID not found!";setTimeout(()=>d.remove(),3000);return}d.textContent="Loading gallery data...";try{const allPhotos=[];let offset=0;let total=0;do{const resp=await fetch(`https://www.wwe.com/api/gallery/${nid}/12/${offset}`);const data=await resp.json();if(!data.photos||!data.photos.length)break;allPhotos.push(...data.photos);total=data.total_images||total;offset+=12;d.textContent=`Loaded ${allPhotos.length}/${total||allPhotos.length} photos...`}while(allPhotos.length<total);d.textContent="Extracting image URLs...";const imgs=[];for(const p of allPhotos){if(!p.photo)continue;const match=p.photo.match(/src=\\"([^"]+)\\"/)||p.photo.match(/src="([^"]+)"/);if(match){let url=match[1].replace(/\\\//g,"/").replace(/\\u0022/g,"");if(!url.startsWith("http"))url="https://www.wwe.com"+url;url=url.replace(/\/styles\/[^\/]+\//,"/styles/wwe_16_9_xl/").replace(/\/w\/\d+/,"/w/2000").replace(/\/h\/\d+/,"/h/2000");imgs.push(url)}}d.remove();if(!imgs.length){alert("Could not extract image URLs!");return}const o=document.createElement("div");o.style.cssText="position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.95);z-index:9999999;overflow:auto;padding:20px";o.innerHTML=`<div style="max-width:1200px;margin:0 auto;color:%23fff"><div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:20px"><h2 style="margin:0">Found ${imgs.length} Images</h2><div><button id="da" style="background:%232e7d32;color:%23fff;border:none;padding:12px 24px;border-radius:6px;font-weight:600;cursor:pointer;margin-right:10px">Download All</button><button id="cb" style="background:%23d32f2f;color:%23fff;border:none;padding:12px 24px;border-radius:6px;font-weight:600;cursor:pointer">Close</button></div></div><div id="g" style="display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:15px"></div></div>`;document.body.appendChild(o);const g=o.querySelector("#g");imgs.forEach((url,i)=>{const c=document.createElement("div");c.style.cssText="background:%232a2a2a;border-radius:8px;overflow:hidden;cursor:pointer;transition:transform 0.2s";c.innerHTML=`<img src="${url}" style="width:100%;height:200px;object-fit:cover;display:block"><div style="padding:10px;text-align:center;font-size:13px">%23${i+1}</div>`;c.onclick=()=>{const a=document.createElement("a");a.href=url;a.download=`wwe-${String(i+1).padStart(3,"0")}.jpg`;a.click()};c.onmouseover=()=>c.style.transform="scale(1.05)";c.onmouseout=()=>c.style.transform="scale(1)";g.appendChild(c)});o.querySelector("#cb").onclick=()=>o.remove();o.querySelector("#da").onclick=async()=>{const b=o.querySelector("#da");b.disabled=true;b.textContent="Downloading...";for(let i=0;i<imgs.length;i++){const a=document.createElement("a");a.href=imgs[i];a.download=`wwe-${String(i+1).padStart(3,"0")}.jpg`;a.click();await new Promise(r=>setTimeout(r,200))}b.disabled=false;b.textContent="Download All"}}catch(e){d.textContent="Error: "+e.message;console.error(e);setTimeout(()=>d.remove(),5000)}})();' class="bookmarklet">üì∏ WWE Photos</a>
            
            <div class="instruction">
                ‚ö†Ô∏è Drag the button above to your bookmarks bar (don't click it here!)
            </div>

            <div class="note">
                <strong>Can't see your bookmarks bar?</strong><br>
                ‚Ä¢ Chrome/Edge: Press <code>Ctrl+Shift+B</code> (Windows) or <code>Cmd+Shift+B</code> (Mac)<br>
                ‚Ä¢ Safari: View ‚Üí Show Favorites Bar
            </div>
        </div>

        <div class="step">
            <h2>Step 2: Use It</h2>
            <ol>
                <li>Go to any WWE gallery page</li>
                <li>Click the <strong>üì∏ WWE Photos</strong> bookmark in your bookmarks bar</li>
                <li>Wait while it auto-scrolls to load all images (blue indicator in top-right)</li>
                <li>A popup shows all images - click "Download All" or individual images</li>
                <li>Images save to your Downloads folder automatically</li>
            </ol>

            <div class="note" style="border-color: #0066cc;">
                <strong>‚ú® How it works:</strong><br>
                The bookmarklet runs directly on the WWE page, automatically scrolls to load all lazy-loaded images, then lets you download them all. No CORS issues, no extensions needed!
            </div>
        </div>

        <div class="step">
            <h2>Tips</h2>
            <p><strong>Browser permission:</strong> First time you click "Download All", your browser might ask if you want to allow multiple downloads. Click "Allow".</p>
            <p><strong>Works on any WWE gallery:</strong> SmackDown, Raw, NXT, PLEs - any gallery page.</p>
            <p><strong>High quality:</strong> Downloads at 2000px resolution automatically.</p>
        </div>
    </div>
</body>
</html>
